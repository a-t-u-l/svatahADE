<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="Behaviour driven automation platform" />
    <meta name="author" content="svatah" />

    <title>Svatah ADE</title>
    <link href="./../../node_modules/bulma/css/bulma.min.css" rel="stylesheet" />
    <link href='./../css/font-awesome.min.css' rel='stylesheet' type='text/css' />
    <link href="./../css/svatah.css?v=1.0.1" rel="stylesheet" />
    <link href="./../css/jsoneditor.min.css" rel="stylesheet" type="text/css">
    <link href="./../css/trumbowyg.css" rel="stylesheet" />

    <style type="text/css">
        .buttonload {
            background-color: #4CAF50;
            /* Green background */
            border: none;
            /* Remove borders */
            color: white;
            /* White text */
            padding: 12px 24px;
            /* Some padding */
            font-size: 16px;
            /* Set a font-size */
        }

        /* Add a right margin to each icon */
        /* .fa {
            margin-left: -12px;
            margin-right: 8px;
        } */

        #jsoneditor {
            height: 600px;
        }

        .tab-content .tab-pane {
            display: none;
        }

        .tab-content .tab-pane.is-active {
            display: block;
        }
    </style>
</head>

<body id="bod" class="white-content">

    <div class="columns is-gapless is-mobile" style="margin-bottom:0px;">
        <div class="column is-1" style="width: 5%; min-height: 100vh; background-color: rgb(31, 35, 221);">
            <div class="section">
                <div class="menu sticky">
                    <ul id="menu" class="menu-list no-hover">
                        <li class="logo">
                            <a href="https://www.svatah.in" target="_blank" class="simple-text logo-mini"
                                style="padding: 0px 0px 30px 0px; color: white; font-size:26px">
                                S
                            </a>
                        </li>
                        <li class="project">
                            <a href="./project.html" title="project"
                                style="padding: 15px 0px 15px 0px; color: white; font-size:26px">
                                <i class="fa fa-folder-o"></i>
                            </a>
                        </li>

                        <li class="newuiproject">
                            <a href="./newproject.html" title="newproject"
                                style="padding: 15px 0px 15px 0px; color: white; font-size:26px">
                                <i class="fa fa-plus-square-o"></i>
                            </a>
                        </li>

                        <li class="results">
                            <a href="./results.html" title="results"
                                style="padding: 15px 0px 15px 0px; color: white; font-size:26px">
                                <i class="fa fa-check-square-o"></i>
                            </a>
                        </li>

                        <li class="api-client">
                            <a href="./apiclient.html" title="API client"
                                style="padding: 15px 0px 15px 0px; color: white; font-size:26px">
                                <i class="fa fa-lemon-o"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="column is-2 scrollable" style="min-height: 100vh; background-color: rgb(238, 238, 245);">
            <div class="section">
                <div class="panel" style="box-shadow:none">
                    <ul id="menu">
                        <div class="panel-heading" style="padding-left:0px">Explorer</div>
                        <block id="explorer">
                            <li class="panel-block" style="border-top: 1px dotted grey">
                                <a class="nav-link" id="config-tab" href="#config">Config</a>
                            </li>
                            <li class="panel-block" style="border-top: 1px dotted grey">
                                <a class="nav-link" id="data-repo-tab" href="#data-repo">Data Repository</a>
                            </li>
                            <li class="panel-block" style="border-top: 1px dotted grey">
                                <a class="nav-link" id="locator-repo-tab" href="#locator-repo">Locator
                                    Repository</a>
                            </li>
                            <li class="panel-block" style="border-top: 1px dotted grey">
                                <a class="nav-link" id="api-repo-tab" href="#api-repo">API
                                    Repository</a>
                            </li>
                        </block>
                        <div class="panel-heading level" style="padding-left:0px;padding-top:20px">
                            <span class="level-left">Flows</span>
                            <span class="level-right" style="text-align: right;">
                                <a class="nav-link" id="new-flow-tab" href="#flowEditorContainer"><i
                                        class="fa fa-plus"></i></a>
                            </span>
                        </div>
                        <block id="flowList">

                        </block>
                        <div class="panel-heading" style="margin-bottom: auto;">
                            <span class="table-add mb-3 mr-2">
                                <button id="create-project-button" onclick="createProject()"
                                    class="button is-text create-new-project-btn"><i id="buttonLoader"></i>
                                    Save Project
                                </button>
                            </span>
                        </div>
                    </ul>
                </div>
            </div>
        </div>
        <div class="column is-9 scrollable">
            <div class="section">

                <div id="alertbar" class="col">

                </div>

                <div id="project">
                    <div class="tab-content" id="tabContent">
                        <div class="tab-pane is-active" id="config">
                            <div class="section">
                                <p class="help" style="padding-bottom: 20px; font-size: 14px;">Define your project
                                    configuration.
                                    You can define
                                    more configurations later for different builds.</p>
                                <div class="field is-horizontal">
                                    <div class="field-label is-normal">
                                        <label class="label">Project name</label>
                                    </div>
                                    <div class="field-body">
                                        <div class="field">
                                            <p class="control is-expanded ">
                                                <input id="name" name="name" class="input" type="text"
                                                    placeholder="project name" disabled />
                                            </p>
                                            <p class="help">Your project name. You won't be able to change it later.</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="field is-horizontal">
                                    <div class="field-label is-normal">
                                        <label class="label">Config name</label>
                                    </div>
                                    <div class="field-body">
                                        <div class="field">
                                            <p class="control is-expanded ">
                                                <input id="configName" name="configName" class="input" type="text"
                                                    placeholder="config name" disabled />
                                            </p>
                                            <p class="help">Enter a
                                                unique config name. This will be used later for your
                                                builds.</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="field is-horizontal">
                                    <div class="field-label is-normal">
                                        <label class="label">URL</label>
                                    </div>
                                    <div class="field-body">
                                        <div class="field">
                                            <p class="control is-expanded ">
                                                <input id="url" name="url" class="input" type="text"
                                                    placeholder="Provide a valid url" required />
                                            </p>
                                            <p class="help">Provide a valid url as project's starting point.</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="field is-horizontal">
                                    <div class="field-label is-normal">
                                        <label class="label">Browser</label>
                                    </div>
                                    <div class="field-body">
                                        <div class="field is-narrow">
                                            <div class="control">
                                                <div class="select is-fullwidth">
                                                    <select id="browser" name="browser">
                                                        <option value="chrome">chrome</option>
                                                        <option value="firefox">firefox</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="field is-horizontal">
                                    <div class="field-label is-normal">
                                        <label class="label">Take screenshot</label>
                                    </div>
                                    <div class="field-body">
                                        <div class="field is-narrow">
                                            <div class="control">
                                                <div class="select is-fullwidth">
                                                    <select id="takeStepScreenshot" name="takeStepScreenshot">
                                                        <option value="true">yes</option>
                                                        <option value="false">no</option>
                                                    </select>
                                                </div>
                                                <p class="help">Choose whether to take screenshot at each step.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="field is-horizontal">
                                    <div class="field-label is-normal">
                                        <label class="label">Executors</label>
                                    </div>
                                    <div class="field-body">
                                        <div class="field is-narrow">
                                            <div class="control">
                                                <div class="select is-fullwidth">
                                                    <select id="threadCount" name="threadCount">
                                                        <option value="1">1</option>
                                                        <option value="2">2</option>
                                                        <option value="3">3</option>
                                                        <option value="4">4</option>
                                                        <option value="5">5</option>
                                                        <option value="6">6</option>
                                                        <option value="7">7</option>
                                                        <option value="8">8</option>
                                                    </select>
                                                </div>
                                                <p class="help">Numbers of executors. Note, flows will run in parallel.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tab-pane" id="data-repo">
                            <div class="section">
                                <div id="dataAlert" class="notification is-danger is-light" hidden="hidden">
                                    <span>Data field/s can not have empty key or value!</span>
                                </div>
                                <p class="help" style="padding-bottom: 20px; font-size: 14px;">The data table fields are
                                    editable.
                                    You would need to save the changes before submitting the flow</p>

                                <div id="data-table" class="table-editable">
                                    <table class="table is-bordered is-fullwidth">
                                        <thead>
                                            <tr class="table-active">
                                                <th>Variable Name</th>
                                                <th>Variable Value</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <!-- This is our clonable table line -->
                                        <tr class="hide" hidden="hidden">
                                            <td contenteditable="true"></td>
                                            <td contenteditable="true"></td>
                                            <td>
                                                <span class="data-table-remove">
                                                    <button type="button" rel="tooltip" title="Delete"
                                                        class="button is-danger is-light">
                                                        <i class="fa fa-remove"></i>
                                                    </button>
                                                </span>
                                            </td>
                                        </tr>
                                        <!-- ------------------------------- -->


                                    </table>
                                    <span id="addDataRow" class="data-table-add">
                                        <button type="button" rel="tooltip" title="Add"
                                            class="button is-warning is-light"><i class="fa fa-plus-square-o"></i>
                                        </button>
                                    </span>
                                    <span class="data-export-btn">
                                        <button id="data-export-btn" type="button" disabled="true" rel="tooltip"
                                            title="Export" class="button is-warning is-light save-btn"><i
                                                class="fa fa-save"></i>
                                        </button>
                                    </span>
                                    <span>
                                        <button type="button" class="button is-warning is-light pull-right"
                                            data-toggle="modal" onClick="exportDataRepository()"
                                            data-target="#exportDataModal">
                                            export
                                        </button>
                                        <button type="button" class="button is-warning is-light pull-right"
                                            data-toggle="modal" data-target="#importDataModal">
                                            import
                                        </button>
                                    </span>
                                </div>

                                <div class="form-group">
                                    <input id="dataEditor" name="dataFile" type="text" class="form-control" value=""
                                        hidden="hidden" />
                                </div>
                            </div>
                        </div>

                        <div class="tab-pane" id="locator-repo">
                            <div class="section">
                                <div id="locatorAlert" class="notification is-danger is-light" hidden="hidden">
                                    <span>Locator field/s can not have empty key or
                                        value!</span>
                                </div>
                                <p class="help" style="padding-bottom: 20px; font-size: 14px;">The locator table fields
                                    are editable.
                                    You would need to save the changes before submitting the flow.</p>

                                <div id="locator-table" class="table-editable">
                                    <table class="table is-bordered is-fullwidth">
                                        <thead>
                                            <tr class="table-active">
                                                <th>Locator Identifier</th>
                                                <th>Locator Details</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <!-- This is our clonable table line -->
                                        <tr class="hide" hidden="hidden">
                                            <td contenteditable="true"></td>
                                            <td contenteditable="true"></td>
                                            <td>
                                                <span class="locator-table-remove">
                                                    <button type="button" rel="tooltip" title="Delete"
                                                        class="button is-danger is-light">
                                                        <i class="fa fa-remove"></i>
                                                    </button>
                                                </span>
                                            </td>
                                        </tr>
                                        <!-- ------------------------------- -->


                                    </table>
                                    <span id="addLocatorButton" class="locator-table-add">
                                        <button type="button" rel="tooltip" title="Add"
                                            class="button is-warning is-light"><i class="fa fa-plus-square-o"></i>
                                        </button>
                                    </span>
                                    <span class="locator-export-btn">
                                        <button id="locator-export-btn" type="button" disabled="true" rel="tooltip"
                                            title="Export" class="button is-warning is-light save-btn"><i
                                                class="fa fa-save"></i>
                                        </button>
                                    </span>
                                    <span>
                                        <button type="button" class="button is-warning is-light pull-right"
                                            data-toggle="modal" onClick="exportLocatorsRepository()"
                                            data-target="#exportLocatorModal">
                                            export
                                        </button>
                                        <button type="button" class="button is-info is-light pull-right"
                                            onclick="openModal('importLocatorModal')">
                                            import
                                        </button>
                                    </span>
                                </div>

                                <div class="form-group">
                                    <input id="locatorEditor" name="locatorFile" type="text" class="form-control"
                                        value="" hidden="hidden" />
                                </div>
                            </div>
                        </div>

                        <div class="tab-pane" id="api-repo">

                            <div class="section">
                                <p class="help" style="padding-bottom: 20px; font-size: 14px;">List of project API's.
                                    You can invoke an API in a flow using proper intent.</p>
                                <div id="api-view-table" class="table-editable">
                                    <table class="table is-bordered is-fullwidth">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Method</th>
                                                <th>URL</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="ApiView">

                                        </tbody>
                                    </table>
                                </div>
                                <div style="padding-top: 15px;">
                                    <button id="addApiModal" onclick="showAddApiView()"
                                        class="button is-primary is-light">
                                        Add New API
                                    </button>
                                </div>
                            </div>

                            <div id="apiViewSection" class="section" hidden>

                                <div class="field is-horizontal">
                                    <div class="field-label is-normal">
                                        <label class="label">Name</label>
                                    </div>
                                    <div class="field-body">
                                        <div class="field">
                                            <p class="control is-expanded has-icons-left">
                                                <input id="apiname" name="name" class="input" type="text"
                                                    placeholder="Provide API Name">
                                                <span class="icon is-small is-left">
                                                    <i class="fa fa-tag"></i>
                                                </span>
                                            </p>
                                            <p class="help">Please provide a unique API tag name. Note, in edit view,
                                                altering name will save it as a new API request.</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="field is-horizontal">
                                    <div class="field-label is-normal">
                                        <label class="label">Http Method</label>
                                    </div>
                                    <div class="field-body">
                                        <div class="field is-narrow">
                                            <div class="control">
                                                <div class="select is-fullwidth">
                                                    <select id="httpMethod" name="httpMethod"
                                                        onchange="getSelected(this);" value="GET">
                                                        <option value="GET" id="getOption" selected="selected">GET
                                                        </option>
                                                        <option value="POST">POST</option>
                                                        <option value="PUT">PUT</option>
                                                        <option value="PATCH">PATCH</option>
                                                        <option value="DELETE">DELETE</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="field is-horizontal">
                                    <div class="field-label is-normal">
                                        <label class="label">URL</label>
                                    </div>
                                    <div class="field-body">
                                        <div class="field">
                                            <p class="control is-expanded has-icons-left">
                                                <input id="uri" name="uri" class="input" type="text"
                                                    placeholder="Provide URL">
                                                <span class="icon is-small is-left">
                                                    <i class="fa fa-link"></i>
                                                </span>
                                            </p>
                                            <p class="help">Please provide API request path.</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="field is-horizontal">
                                    <div class="field-label is-normal">
                                        <label class="label">Content Type</label>
                                    </div>
                                    <div class="field-body">
                                        <div class="field is-narrow">
                                            <div class="control">
                                                <div class="select is-fullwidth">
                                                    <select id="contentType" name="contentType" value="">
                                                        <option value="json">Application&#47;Json</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="field is-horizontal">
                                    <div class="field-label is-normal">
                                        <label class="label">Accept All SSL Certificates</label>
                                    </div>
                                    <div class="field-body">
                                        <div class="field is-narrow">
                                            <div class="control">
                                                <div class="select is-fullwidth">
                                                    <select id="acceptAllSslCert" name="acceptAllSslCert" value="false">
                                                        <option value="false" selected="selected">False</option>
                                                        <option value="true">True</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="field is-horizontal">
                                    <div class="field-label is-normal">
                                        <label class="label">Follow Redirects</label>
                                    </div>
                                    <div class="field-body">
                                        <div class="field is-narrow">
                                            <div class="control">
                                                <div class="select is-fullwidth">
                                                    <select id="followRedirect" name="followRedirect" value="false">
                                                        <option value="false" selected="selected">False</option>
                                                        <option value="true">True</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Editable table -->
                                <div class="field is-horizontal">
                                    <div class="field-label is-normal">
                                        <label class="label">API Headers</label>
                                    </div>
                                    <div class="field-body">
                                        <div class="field is-narrow">

                                            <div class="form-group">
                                                <input id="apiEditor" name="headers" type="text" class="form-control"
                                                    value="" hidden="hidden" />
                                            </div>

                                            <div id="apiAlert" class="notification is-danger" hidden="hidden">
                                                <span>Header field/s can not have empty key or
                                                    value!</span>
                                            </div>

                                            <div id="api-header-table" class="table-editable">
                                                <table class="table is-bordered is-fullwidth">
                                                    <tr>
                                                        <th style="font-weight: normal;">Header Key
                                                        </th>
                                                        <th style="font-weight: normal;">Header
                                                            Value</th>
                                                        <th></th>
                                                    </tr>
                                                    <!-- This is our clonable table line -->
                                                    <tr class="hide" hidden="hidden">
                                                        <td contenteditable="true"></td>
                                                        <td contenteditable="true"></td>
                                                        <td>
                                                            <span class="api-header-table-remove">
                                                                <button type="button" rel="tooltip" title="Delete"
                                                                    class="button is-danger is-light">
                                                                    <i class="fa fa-remove"></i>
                                                                </button>
                                                            </span>
                                                        </td>
                                                    </tr>
                                                    <!-- ------------------------------- -->


                                                </table>
                                                <p id="variableHelp" class="help">Please
                                                    define/change all the headers key and value
                                                    accordingly in
                                                    the
                                                    header table.
                                                </p>
                                                <span class="api-header-table-add">
                                                    <button type="button" rel="tooltip" title="Add"
                                                        class="button is-info is-light">
                                                        <i class="fa fa-plus"></i>
                                                    </button>
                                                </span>
                                                <span class="api-export-btn">
                                                    <button id="api-export-btn" type="button" disabled="true"
                                                        rel="tooltip" title="Export"
                                                        class="button is-info is-light api-header-save-btn">
                                                        <i class="fa fa-save"></i>
                                                    </button>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div id="notGetDivCheck" style="display:none;">
                                    <div class="field is-horizontal">
                                        <div class="field-label is-normal">
                                            <label class="label">Body</label>
                                        </div>
                                        <div class="field-body">
                                            <div style="min-width :100%" rows="17" value="" id="requestBody"
                                                name="requestBody">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="field is-horizontal" style="padding-top: 10px;">

                                    <div class="field-body">
                                        <div class="field">
                                            <div class="control">
                                                <button id="save-api-button" type="button" rel="tooltip" disabled="true"
                                                    title="Save API Request" onclick="addApiToProject()"
                                                    class="button is-info is-light">save
                                                    request
                                                </button>
                                                <button type="button" class="button is-text pull-right"
                                                    onclick="openModal('importModal')">
                                                    import
                                                </button>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tab-pane" id="new-flow">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <h4 class="card-title">User Journey Flows</h4>
                                            <h6 class="card-title">Define your tests here using svatah
                                                flow
                                                specification.
                                                A Single flow defines the one continuous path of journey
                                                user
                                                takes through the website.</h6>
                                        </div>
                                        <div class="card-body">
                                            <div class="form-group">
                                                <div class="col-md-12">
                                                    <input id="flowFileName" name="flowFileName" type="text"
                                                        placeholder="Flow File Name" class="form-control" value=""
                                                        required />
                                                    <small id="flowFileNameHelp" class="form-text text-muted">Enter
                                                        flow
                                                        file name
                                                    </small>
                                                </div>
                                            </div>

                                            <div id="TextBoxesGroup">
                                                <div class="form-group">
                                                    <div class="col-md-12">
                                                        <div id="flowEditorContainer" class="trumbowyg">
                                                            <div id="flowEditor">

                                                            </div>
                                                        </div>
                                                        <!-- <textarea id="flowEditor" name="flowFile"
                                                        style="min-width: 100%"
                                                        placeholder="Define you test flow here."
                                                        rows="10" required></textarea>
                                                    <textarea id="flowEditorContent"
                                                        name="flowEditorContent" hidden="">
                                                    </textarea> -->
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <span class="table-add mb-3 mr-2">
                                                    <button type="button" rel="tooltip" title="run" onclick="runTest()"
                                                        class="button button-warning is-light">
                                                        <i class="fa fa-play-circle-o"></i>
                                                    </button>
                                                </span>
                                                <span class="table-add mb-3 mr-2">
                                                    <button id="save-flow-button" title="save"
                                                        onclick="addFlowToProject()"
                                                        class="buttontn is-warning is-light add-new-flow-btn">
                                                        <i class="fa fa-save"></i>
                                                    </button>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <footer class="footer">
                        <p class="copyright pull-right">
                            &copy;
                            <script>
                                document.write(new Date().getFullYear())
                            </script>
                            <a href="https://www.svatah.in" target="_blank">Svatah</a>, Behaviour Driven Automation
                            Platform
                        </p>
                    </footer>
                </div>
            </div>
        </div>
    </div>

    <!---Modal -->
    <div class="modal" id="importModal">
        <div class="modal-background"></div>
        <div class="modal-card">
            <header class="modal-card-head">
                <p class="modal-card-title" id="importModalLongTitle">Import API request as JSON</p>
                <button id="importModalCloseButton" onclick="closeModal('importModal')" type="button"
                    class="delete"></button>
            </header>
            <section class="modal-card-body">
                <p>Paste your API request in Svatah JSON format</p>
                <textarea style="min-width: 100%" rows="11" value="" id="apiRequestImportJson"
                    name="apiRequestImportJson"></textarea>
            </section>
            <div class="modal-card-foot">
                <button type="button" onclick="importAPI()" class="button is-info is-light">Import</button>
            </div>
        </div>
    </div>

    <div class="modal" id="importLocatorModal">
        <div class="modal-background"></div>
        <div class="modal-card">
            <header class="modal-card-head">
                <p class="modal-card-title" id="importLocatorModalLongTitle">Import locators</p>
                <button id="importLocatorModalCloseButton" onclick="closeModal('importLocatorModal')" type="button"
                    class="delete"></button>
            </header>
            <section class="modal-card-body">
                <p>Paste your locators in Svatah JSON format</p>
                <textarea style="min-width: 100%" rows="11" value="" id="locatorImportJson"
                    name="locatorImportJson"></textarea>
            </section>
            <div class="modal-card-foot">
                <button type="button" onclick="importLocatorsRepository()"
                    class="button is-info is-light">Import</button>
            </div>
        </div>
    </div>

    <div class="modal fade" id="exportLocatorModal" tabindex="-1" role="dialog"
        aria-labelledby="exportLocatorModalTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="card modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exportLocatorModalLongTitle">Export locators as JSON
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <textarea style="min-width: 100%" rows="11" value="" id="locatorExportJson" name="locatorExportJson"
                        disabled></textarea>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="importDataModal" tabindex="-1" role="dialog" aria-labelledby="importDataModalTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="card modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="iimportDataModalLongTitle">Import Data</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="color:#7d7f84;">
                    <p>Paste your data mapping in Svatah JSON format</p>
                    <textarea style="min-width: 100%" rows="11" value="" id="dataImportJson"
                        name="dataImportJson"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" onclick="importDataRepository()" class="btn btn-warning btn-simple"
                        data-dismiss="modal">Import</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="exportDataModal" tabindex="-1" role="dialog" aria-labelledby="exportDataModalTitle"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="card modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exportDataModalLongTitle">Export data as JSON</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <textarea style="min-width: 100%" rows="11" value="" id="dataExportJson" name="dataExportJson"
                        disabled></textarea>
                </div>
            </div>
        </div>
    </div>

    <!---Modal Ends-->
</body>


<!--   Core JS Files   -->
<script>if (typeof module === 'object') { window.module = module; module = undefined; }</script>
<script src="./../js/jquery.min.js?v=3.4.0.1" type="text/javascript"></script>
<script src="./../js/jsoneditor.min.js"></script>
<script src="./../js/svatah.js"></script>
<script src="./../js/newproject.js"></script>
<script src="./../js/viewproject.js"></script>
<script src="./../js/trumbowyg.js"></script>
<script src="./../js/jquery.textcomplete.js?v=1.0.0" type="text/javascript"></script>
<script>if (window.module) module = window.module;</script>

<script>
    $('#apiname').on('focus', function (event) {
        event.preventDefault();
        $('#save-api-button').attr('disabled', false);
    });

    $('#flowEditor').trumbowyg({
        resetCss: false,
        autogrowOnEnter: false,
        svgPath: './../css/img/trumbowyg-icons.svg',
        hideButtonTexts: true,
        btns: [
            ['fullscreen']
        ]
    });
</script>

<script>
    function getSelected(nameSelect) {
        if (nameSelect) {
            let getOptionValue = document.getElementById("getOption").value;
            if (getOptionValue == nameSelect.value) {
                document.getElementById("notGetDivCheck").style.display = "none";
            }
            else {
                document.getElementById("notGetDivCheck").style.display = "block";
            }
        }
        else {
            document.getElementById("notGetDivCheck").style.display = "block";
        }
    }
</script>

<script>
    let container = document.getElementById('requestBody');
    let options = {
        mode: 'text',
        modes: ['code', 'text'], // allowed modes
        onError: function (err) {
            alert(err.toString());
        },
        onModeChange: function (newMode, oldMode) {
            console.log('Mode switched from', oldMode, 'to', newMode);
        }
    };
    var json = '';
    var posteditor = new JSONEditor(container, options, json);
</script>

<script>
    let tableCounter = 3;
    var tableArr = ['#locator-table', '#data-table', '#api-header-table'];
    var exportButtonArr = ['#locator-export-btn', '#data-export-btn', '#api-export-btn'];
    let tableAddRowButtonArr = ['.locator-table-add', '.data-table-add', '.api-header-table-add'];
    let tableRemoveRowButtonArr = ['.locator-table-remove', '.data-table-remove', '.api-header-table-remove'];
    let createProjectButton = '#create-project-button';
    let editorArr = ['#locatorEditor', '#dataEditor', '#apiEditor'];

    for (let index = 0; index < tableCounter; index++) {
        $(tableAddRowButtonArr[index]).click(function () {
            var $clone = $(tableArr[index]).find('tr.hide').clone(true).removeClass('hide table-line');
            $(tableArr[index]).find('table').append($clone.prop("hidden", false));
            $(exportButtonArr[index]).prop("disabled", false);
            $(createProjectButton).prop("disabled", true);
        });

        $(tableRemoveRowButtonArr[index]).click(function () {
            $(this).parents('tr').detach();
            $(exportButtonArr[index]).prop("disabled", false);
            $(createProjectButton).prop("disabled", true);
        });

        $(tableArr[index]).on("click", 'tr td', function () {
            $(exportButtonArr[index]).prop("disabled", false);
            $(createProjectButton).prop("disabled", true);
        });

        // A few jQuery helpers for exporting only
        jQuery.fn.pop = [].pop;
        jQuery.fn.shift = [].shift;

        $(exportButtonArr[index]).click(function () {
            console.log('tableArr[index] : ' + tableArr[index])
            let $rows = $(tableArr[index]).find("tr:not(:hidden)");
            let headers = [];
            let data = [];

            // Get the headers (add special header logic here)
            $($rows.shift()).find('th:not(:empty)').each(function () {
                headers.push($(this).text().toLowerCase());
            });

            // Turn all existing rows into a loopable array
            $rows.each(function () {
                var $td = $(this).find('td');
                var h = {};

                // Use the headers from earlier to name our hash keys
                headers.forEach(function (header, i) {
                    h[header] = $td.eq(i).text();
                });
                console.log('val : ' + JSON.stringify(h))
                data.push(h);
            });

            // Output the result
            let flag = true;
            for (let member in data) {
                for (let field in data[member]) {
                    if (data[member][field] == '') {
                        flag = false;
                        break;
                    }
                    if (!flag) {
                        break;
                    }
                }
                if (!flag) {
                    break;
                }
            }
            if (flag) {
                console.log(JSON.stringify(data));
                $(editorArr[index]).val(JSON.stringify(data));
                $(exportButtonArr[index]).prop("disabled", true);
                $(createProjectButton).prop("disabled", false);
            }
            else {
                showAlert('alertbar', 'danger', 'can not save empty row')
                $(createProjectButton).prop("disabled", true)
            }
            flag = true;
        });

        $(createProjectButton).on('click', function () {
            if ($(exportButtonArr[0]).attr('disabled') == 'disabled' &&
                $(exportButtonArr[1]).attr('disabled') == 'disabled' &&
                $(exportButtonArr[2]).attr('disabled') == 'disabled' &&
                $('#save-api-button').attr('disabled') == 'disabled') {
                $(createProjectButton).prop('disabled', false);
            }
            else {
                showAlert('alertbar', 'danger', 'Please save repositories first ...')
                $(createProjectButton).prop('disabled', true);
            }
        });
    }
</script>

<script>
    $(document).ready(function () {
        {
            let locatorRows = $('#locator-table').find('tr:not(:empty)');
            let dataRows = $('#data-table').find('tr:not(:empty)');
            $("#locatorEditor").val(JSON.stringify(getFieldVal(locatorRows)));
            $("#dataEditor").val(JSON.stringify(getFieldVal(dataRows)));
        }
    });

    function getFieldVal($rows) {
        var headers = [];
        var data = [];
        // Get the headers (add special header logic here)
        $($rows.shift()).find('th:not(:empty)').each(function () {
            headers.push($(this).text().toLowerCase());
        });
        //console.log('headers : '+ JSON.stringify(headers));
        // Turn all existing rows into a loopable array
        $rows.each(function () {
            var $td = $(this).find('td');
            var h = {};

            // Use the headers from earlier to name our hash keys
            headers.forEach(function (header, i) {
                if ($td.eq(i).text() != "")
                    h[header] = $td.eq(i).text();
            });
            if (!$.isEmptyObject(h))
                data.push(h);
        });
        return data;
    }

    $('#flowEditor').textcomplete([
        { // actions
            id: 'intent',
            words: ["open", "opens", "navigate", "navigates", "forward", "go forward", "clicks on forward button",
                "back", "go back", "clicks on back button", "refresh", "refreshes", "reload", "reloads",
                "switch to new window", "switches to new window", "switch to new tab", "switches to new tab",
                "switch to frame", "switches to frame", "close other windows", "closes other windows",
                "clicks and holds", "click and hold", "context click", "context clicks", "double click", "double clicks",
                "key up", "keys up", "key down", "keys down", "release", "releases",
                "validate title", "validates title", "verifyTitle", "verify title",
                "move to element", "moves to element", "move over element", "moves over element", "move to element center", "moves to element center",
                "move to element and click", "moves to element and click", "move over element and click", "moves over element and click",
                "switch to main window", "switches to main window", "switch to main tab", "switches to main tab",
                'clicks', 'click', 'clears', 'clear', 'get text', 'copy text', 'save text', 'getText', 'types', 'type',
                'submits', 'click enter', 'submit', 'dismiss alert', 'dismisses alert', 'dismissAlert', 'accept alert',
                'accepts alert', 'acceptAlert', 'waits', 'sleep', 'sleeps', 'waiting', 'wait', 'assert selected', 'check selected', 'is selected',
                'assertSelected', 'assert not selected', 'is not selected', 'assertNotSelected', 'assert displayed', 'isDisplayed',
                'is displayed', 'assertDisplayed', 'assert not displayed', 'is not displayed', 'assertNotDisplayed', 'assert enabled',
                'is enabled', 'is not disabled', 'assertEnabled', 'assert disabled', 'is disabled', 'is not enabled', 'assertDisabled',
                'assert element present', 'is element present', 'assertElementPresent', 'assert alert present', 'is alert present', 'assertAlertPresent',
                'assert alert not present', 'is alert not present', 'assertAlertNotPresent', 'validate text', 'validates text', 'verifyText',
                'verify text', 'validateText', 'contains text', 'validate contains text', 'verify contains text', 'verifyContainsText',
                'validateContainsText', 'validate tag name', 'verifyTagName', 'verify tag name', 'validateTagName', 'validate attribute value',
                'verifyAttributeValue', 'verify attribute value', 'validateAttributeValue', 'validate location', 'verifyLocation', 'verify location',
                'validateLocation', 'validate dimension', 'verifyDimension', 'verify dimension', 'validateDimension', 'validate rectangle', 'verifyRectangle',
                'verify rectangle', 'validateRectangle', 'accept the alert and validate alert text', 'accept the alert and validate displayed text',
                'acceptAndValidateAlertText', 'reject the alert and validate alert text', 'reject the alert and validate displayed text',
                'rejectAndValidateAlertText', 'invoke', 'call', 'hit', 'invoke without cookies', 'call without cookies', 'hit without cookies',
                'selectByVisibleText', 'select by visible text', 'select by shown text', 'select', 'selectByIndex', 'select by index',
                'selectByValue', 'select by value', 'select by sent value', 'deselectAll', 'deselect all', 'remove all selections',
                'deselectByVisibleText', 'deselect by visible text', 'deselect by shown text', 'deselect', 'deselectByIndex', 'deselect by index',
                'deselectByValue', 'deselect by value', 'deselect by sent value', 'assertMultipleSelectionSupported',
                'assert multiple selection is supported', 'validate multiple selection is supported', 'assertMultipleSelectionNotSupported',
                'assert multiple selection is not supported', 'validate multiple selection is not supported', 'scrollIntoView', 'scroll into view',
                'scroll to view', 'scrollToBottom', 'scroll to bottom', 'scroll to page bottom', 'scroll to bottom of the page', 'scrollToTop',
                'scroll to top', 'scroll to page top', 'scroll to top of the page', 'explicitWaitForElementPresence', 'wait for the presence', "waits for the presence",
                'explicitWaitForElementVisibility', 'wait for the visibility', "waits for the visibility"],
            match: /\+\b(\w{1,})$/,
            search: function (term, callback) {
                callback($.map(this.words, function (word) {
                    return word.indexOf(term) === 0 ? word : null;
                }));
            },
            index: 1,
            replace: function (word) {
                return '+' + word + '+ ';
            }
        },

        { // actions
            id: 'identity',
            words: function () {
                let wordArr = [];
                let locatorString = $("#locatorEditor").val();
                //console.log('locator : '+ locatorString);
                if (locatorString != null && locatorString != '') {
                    let locators = JSON.parse(locatorString);
                    if (Array.isArray(locators)) {
                        locators.forEach(function (item, index) {
                            wordArr.push(item['locator identifier']);
                        });
                    }
                    else {
                        console.log('locator set not defined');
                    }
                }
                return wordArr;
            },
            match: /\~\b(\w{1,})$/,
            search: function (term, callback) {
                callback($.map(this.words(), function (word) {
                    return word.indexOf(term) === 0 ? word : null;
                }));
            },
            index: 1,
            replace: function (word) {
                return '~' + word + '~ ';
            }
        },

        { // actions
            id: 'input',
            words: function () {
                let wordArr = [];
                let dataString = $("#dataEditor").val();
                //console.log('data : '+ dataString);
                if (dataString != null && dataString != '') {
                    let data = JSON.parse(dataString);
                    if (Array.isArray(data)) {
                        data.forEach(function (item, index) {
                            wordArr.push(item['variable name']);
                        });
                    }
                    else {
                        console.log('dataset not defined');
                    }
                }
                return wordArr;
            },
            match: /\*\b(\w{1,})$/,
            search: function (term, callback) {
                callback($.map(this.words(), function (word) {
                    return word.indexOf(term) === 0 ? word : null;
                }));
            },
            index: 1,
            replace: function (word) {
                return '*$' + word + '* ';
            }
        }

    ], {
        onKeydown: function (e, commands) {
            if (e.ctrlKey && e.keyCode === 74) { // CTRL-J
                return commands.KEY_ENTER;
            }
        }
    });
</script>

</html>